{
  "permissions": {
    "allow": [
      "Bash(git log:*)",
      "Bash(git checkout:*)",
      "Bash(git add:*)",
      "Bash(git commit -m \"$\\(cat <<''EOF''\nfeat\\(battle-prep\\): implement implicit battle/prep mode switching\n\nImplements combat-aware mode switching where the bar shows essential\ncombat items during battle and expands to show buffs and utility items\nwhen out of combat.\n\n## Battle/Prep Mode Design\n\n**Battle Mode** \\(in combat\\) - 5 slots:\n- Healthstone \\(emergency conversion\\)\n- Health Potion\n- Mana Potion  \n- Bandage \\(for bubble-bandage, etc.\\)\n- Hearthstone \\(emergency escape\\)\n\n**Prep Mode** \\(out of combat\\) - 10 slots:\n- All 5 battle items \\(same positions\\)\n- Battle Elixir\n- Guardian Elixir\n- Food \\(buff\\)\n- Food \\(non-buff\\)\n- Drink\n\n## Implementation Details\n\n**UI/UI.lua:**\n- Added GetCurrentMode\\(\\) to detect combat state\n- Added mode flags to SLOT_ORDER slots\n- Modified Rebuild\\(\\) to filter slots by current mode\n- Battle items marked with modes = {\"battle\", \"prep\"}\n- Prep-only items marked with modes = {\"prep\"}\n\n**Core.lua:**\n- Updated OnPlayerRegenEnabled\\(\\) to trigger prep mode rebuild\n- Updated OnPlayerRegenDisabled\\(\\) to trigger battle mode rebuild\n- Added debug logging for mode transitions\n- Leverages existing RequestRebuild\\(\\) combat lockdown safety\n\n## Design Contract Compliance\n\n✅ Player Intent First - Implicit mode switching, no manual control needed\n✅ Trust Over Cleverness - Predictable behavior, battle items always same positions\n✅ Combat Safety - Battle mode frozen in combat, prep mode allows reflow\n✅ No Automation - Only changes visibility, never automates actions\n✅ Muscle Memory - Button 1 always healthstone, button 5 always hearthstone in battle\n\n## Benefits\n\n- Reduced cognitive load in combat \\(only essential items visible\\)\n- Predictable muscle memory \\(battle items never move\\)\n- Clean combat UX \\(no buff clutter\\)\n- Expanded utility out of combat \\(all prep items available\\)\n- Seamless transitions \\(automatic mode switching\\)\n\nCo-Authored-By: Claude Sonnet 4.5 <noreply@anthropic.com>\nEOF\n\\)\")",
      "Bash(git commit:*)",
      "Bash(git commit -m \"$\\(cat <<''EOF''\nfeat\\(config\\): add visibility mode for unavailable items\n\nAdds user-configurable visibility modes for prep items during combat,\nallowing players to choose how unavailable slots appear.\n\n## Visibility Modes\n\n**FADE \\(Recommended\\)** - Fades slots to 30% opacity\n- Maintains spatial consistency \\(slots don''t reflow\\)\n- Clear visual feedback on availability\n- Slots remain visible but disabled\n\n**HIDE** - Completely hides unavailable slots\n- Cleaner appearance during combat\n- May cause button positions to shift\n\n**GREY** - Greys out slots at 40% opacity\n- Original behavior before FADE mode\n- Slightly more visible than FADE\n\n**ALWAYS** - Shows all slots at full visibility\n- No visual distinction\n- All slots remain clickable\n\n## Implementation\n\n**Core.lua:**\n- Added visibilityMode to DB_DEFAULTS \\(default: \"FADE\"\\)\n\n**UI/UI.lua:**\n- Enhanced Rebuild\\(\\) to apply visibility mode logic\n- Removed redundant Show\\(\\) loop at end\n- Consolidated visibility logic into mode-aware block\n\n**config.lua:**\n- Added visibilityMode select dropdown\n- Positioned after layout controls \\(order 26\\)\n- Triggers rebuild on change \\(if out of combat\\)\n- Included in Reset Layout functionality\n\n## Design Benefits\n\n- Player choice over combat UX \\(empowerment\\)\n- FADE default provides best balance\n- HIDE option for minimalists\n- ALWAYS option for testing/flexibility\n- Consistent with trust-over-cleverness principle\n\nCo-Authored-By: Claude Sonnet 4.5 <noreply@anthropic.com>\nEOF\n\\)\")",
      "Bash(rsync:*)",
      "Bash(powershell:*)",
      "Bash(ls:*)",
      "Bash(git remote:*)",
      "Bash(git push:*)",
      "Bash(git config:*)"
    ]
  }
}
